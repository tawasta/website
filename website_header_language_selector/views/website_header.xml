<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Header customizations -->
    <template id="header" inherit_id="website.template_header_default">
        <xpath expr="//t[@t-foreach='website.menu_id.child_id']" position="after">
            <li class="nav-item dropdown" t-ignore="true">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
                    <span><i id="nav-selected-language" class="fa fa-language"/></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <t t-foreach="languages" t-as="lg">
                        <a t-att-href="url_for(request.httprequest.path + '?' + keep_query(), lang_code=lg[0])"
                           t-attf-class="dropdown-item js_change_lang #{active_lang == lg and 'active'}"
                           t-att-data-url_code="lg[1]">
                            <span t-if="not no_text" t-esc="lg[2].split('/').pop()"/>
                        </a>
                    </t>
                </ul>
            </li>
        </xpath>
    </template>

    <!-- Show language code in language selector -->
    <template id="header-language-code" inherit_id="header" active="False" customize_show="True" name="Language selector: show code">
        <xpath expr="//i[@id='nav-selected-language']" position="replace">
            <span id="nav-selected-language" t-esc="request.httprequest.cookies.get('frontend_lang') and request.httprequest.cookies.get('frontend_lang').upper()[0:2] or 'EN'" />
        </xpath>
    </template>

</odoo>
